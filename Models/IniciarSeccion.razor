@page "/IniciarSeccion"
@inject Ilogin login
@inject IJSRuntime Js
@inject NavigationManager NavigationManager



<MudText Typo="Typo.h4" GutterBottom="true">Iniciar Seccion</MudText>


<MudTextField T="string" Value="@usuario" Label="E-mail" Variant="Variant.Outlined" Class="my-6"></MudTextField>

<MudTextField @bind-Value="@contrasena" Label="Password" Variant="Variant.Outlined" InputType="@PasswordInput" Adornment="Adornment.End" AdornmentIcon="@PasswordInputIcon" />

<MudButton Variant="Variant.Filled"   Color="Color.Primary" @onclick="BuscarDatos" Size="Size.Large" FullWidth="true">Sign In</MudButton>



@code {

    LoginDb objlo = new LoginDb();
    List<LoginDb> objlogin = new List<LoginDb>();

    string usuario = "";
    string contrasena = "";


    bool PasswordVisibility;
    InputType PasswordInput = InputType.Password;
    string PasswordInputIcon = Icons.Material.Filled.VisibilityOff;


    public void BuscarDatos()
    {
        contrasena = objlo.Contrasena;
        usuario = objlo.Usuario;

        var buscar = login.buscar(objlo);
        if (buscar == null)
        {
            var msj = Js.InvokeAsync<object>("msjAlert", "Usuario incorecto", "error");
        }

        else
        {
            NavigationManager.NavigateTo("/Index");
        }

    }


    }
}


