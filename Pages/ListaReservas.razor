@page "/listaReservas"
@inject IReservas reservas


<div class="row justify-content-center">
    <div class="col-md-8 text-center">
        <h1 class="alert alert-info">Lista de Reservas</h1>
        @if (loading == true)
        {
            <div class="spinner-border text-primary" style="width: 7rem; height: 7rem; margin-top:10rem;" role="status">
                <span class="visually-hidden"></span>
            </div>
        }
    </div>
</div>


@if(lsRerservas != null && loading == false){
    <MudTable Items="@lsRerservas" Hover="true" Breakpoint="Breakpoint.Sm">
        <HeaderContent>
            <MudTh>Id</MudTh>
            <MudTh>Cliente</MudTh>
            <MudTh>Vehículo</MudTh>
            <MudTh>Estado</MudTh>
            <MudTh>Monto</MudTh>
            <MudTh>Fecha Iniciar</MudTh>
            <MudTh>Fecha Fin</MudTh>
            <MudTh>Pagar</MudTh>
        </HeaderContent>
        <RowTemplate>
            <MudTd DataLabel="Id">@context.id</MudTd>
            <MudTd DataLabel="Cliente">@context.cliente</MudTd>
            <MudTd DataLabel="Vehículo">@context.vehiculo</MudTd>
            <MudTd DataLabel="">
              @if(context.estado == 0){
                <MudChip Label="true" Color="Color.Success" Size="Size.Small" Class="ml-auto mud-elevation-25">Pago</MudChip>
              }else{
                <MudChip Label="true" Color="Color.Error" Size="Size.Small" Class="ml-auto mud-elevation-25">Debe</MudChip>
              }

            </MudTd>
            <MudTd DataLabel="Monto">@string.Format("{0:#,0}", context.monto)</MudTd>
            <MudTd DataLabel="Fecha Iniciar">@context.fecha_inicia</MudTd>
            <MudTd DataLabel="Fecha Fin">@context.fecha_fin</MudTd>
            <MudTd DataLabel="Acción">
                <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#divview"><i class="oi oi-dollar"></i></button>
            </MudTd>
        </RowTemplate>
    </MudTable>
}






@code {
    public bool loading = true;

    List<JoinReservas> lsRerservas = new List<JoinReservas>();

    protected async override Task OnInitializedAsync(){
        lsRerservas = await reservas.GetReservesActivos();
        loading = false;
    }
}

        